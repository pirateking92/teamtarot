{"version":3,"file":"animationSetup-DLp9F-jH.js","sources":["../../../.svelte-kit/adapter-node/chunks/animationSetup.js"],"sourcesContent":["import { d as createEventDispatcher } from \"./ssr.js\";\nconst sleep = (ms) => new Promise((resolve) => setTimeout(resolve, ms));\nconst rng = (min, max) => Math.floor(Math.random() * (max - min) + min);\nconst runOnEveryParentUntil = async (element, parent, callback) => {\n  if (!parent) {\n    console.error(\"The specified parent element does not exists!\");\n    return;\n  }\n  let currentElement = element;\n  do {\n    if (currentElement === parent)\n      return;\n    callback(currentElement);\n    currentElement = currentElement.parentElement || currentElement.parentNode;\n  } while (currentElement !== null && currentElement.nodeType === 1);\n};\nconst hasSingleTextNode = (el) => el.childNodes.length === 1 && el.childNodes[0].nodeType === 3;\nconst createElement = (text, elementTag) => {\n  const element = document.createElement(elementTag);\n  element.textContent = text;\n  return element;\n};\nconst filterOutStaticElements = (child) => child.dataset.static === void 0;\nconst getElements = (node, { parentElement }) => {\n  if (hasSingleTextNode(parentElement)) {\n    const text = parentElement.textContent;\n    const childNode = createElement(parentElement.textContent, \"p\");\n    parentElement.textContent = \"\";\n    parentElement.appendChild(childNode);\n    return [{ currentNode: childNode, text }];\n  }\n  if (hasSingleTextNode(node)) {\n    const textWithFilteredAmpersand = node.innerHTML.replaceAll(\"&amp;\", \"&\");\n    return [{ currentNode: node, text: textWithFilteredAmpersand }];\n  } else {\n    const children = [...node.children].filter(filterOutStaticElements);\n    const allChildren = children.flatMap((child) => getElements(child, { parentElement }));\n    return allChildren;\n  }\n};\nconst makeNestedStaticElementsVisible = (parentElement) => {\n  const staticElements = [...parentElement.querySelectorAll(\"[data-static]\")];\n  for (const staticElement of staticElements) {\n    runOnEveryParentUntil(staticElement, parentElement, (currentStaticElement) => {\n      const isParentElement = currentStaticElement !== staticElement;\n      isParentElement && currentStaticElement.classList.add(\"finished-typing\");\n    });\n  }\n};\nconst animationSetup = (node, props) => {\n  const dispatch = createEventDispatcher();\n  const options = { parentElement: node, dispatch, ...props };\n  const elements = getElements(node, options);\n  makeNestedStaticElementsVisible(node);\n  return { options, elements };\n};\nexport {\n  animationSetup as a,\n  rng as b,\n  makeNestedStaticElementsVisible as m,\n  runOnEveryParentUntil as r,\n  sleep as s\n};\n"],"names":[],"mappings":"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"}