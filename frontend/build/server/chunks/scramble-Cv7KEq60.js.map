{"version":3,"file":"scramble-Cv7KEq60.js","sources":["../../../.svelte-kit/adapter-node/chunks/scramble.js"],"sourcesContent":["import { b as rng, a as animationSetup, r as runOnEveryParentUntil, s as sleep } from \"./animationSetup.js\";\nconst getLettersTimeout = (textLetters, timeout) => {\n  const minimumTimeoutPossible = timeout / 3;\n  const lettersTimeout = textLetters.map(() => rng(minimumTimeoutPossible, timeout - 100));\n  return lettersTimeout;\n};\nconst getRandomLetter = () => {\n  const possibleLetters = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789\".split(\n    \"\"\n  );\n  const letterIndexLimit = possibleLetters.length;\n  const randomLetterIndex = rng(0, letterIndexLimit);\n  const randomLetter = possibleLetters[randomLetterIndex];\n  return randomLetter;\n};\nconst scramble = async (node, props) => {\n  const { options, elements } = animationSetup(node, props);\n  const timeout = options.scrambleDuration;\n  await new Promise((resolve) => {\n    elements.forEach(async ({ currentNode, text }) => {\n      let wordLetters = text.split(\"\");\n      const lettersTimeout = getLettersTimeout(wordLetters, timeout);\n      const startingTime = Date.now();\n      runOnEveryParentUntil(currentNode, options.parentElement, (element) => {\n        element.classList.add(\"finished-typing\");\n      });\n      while (Date.now() - startingTime < timeout) {\n        const randomLetterIndex = rng(0, wordLetters.length);\n        const randomLetterTimeout = lettersTimeout[randomLetterIndex];\n        const isRandomLetterWhitespace = wordLetters[randomLetterIndex] === \" \";\n        const timeEllapsed = () => Date.now() - startingTime;\n        const didRandomLetterReachTimeout = () => timeEllapsed() >= randomLetterTimeout;\n        if (didRandomLetterReachTimeout() || isRandomLetterWhitespace) {\n          const letterFinishedAnimation = wordLetters[randomLetterIndex] === text[randomLetterIndex];\n          if (!letterFinishedAnimation)\n            wordLetters[randomLetterIndex] = text[randomLetterIndex];\n          else\n            continue;\n        } else {\n          wordLetters[randomLetterIndex] = getRandomLetter();\n        }\n        const scrambledText = wordLetters.join(\"\");\n        currentNode.innerHTML = scrambledText;\n        const finishedScrambling = scrambledText === text;\n        const letterInterval = options.scrambleSlowdown ? Math.round(timeEllapsed() / 100) : 1;\n        await sleep(letterInterval);\n        if (finishedScrambling) {\n          resolve();\n          break;\n        }\n      }\n      currentNode.innerHTML = text;\n    });\n  });\n  options.dispatch(\"done\");\n  return {\n    update() {\n    },\n    destroy() {\n    }\n  };\n};\nexport {\n  scramble as default\n};\n"],"names":[],"mappings":"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"}