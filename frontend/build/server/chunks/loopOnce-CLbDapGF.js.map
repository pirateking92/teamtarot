{"version":3,"file":"loopOnce-CLbDapGF.js","sources":["../../../.svelte-kit/adapter-node/chunks/loopOnce.js"],"sourcesContent":["import { a as animationSetup, r as runOnEveryParentUntil } from \"./animationSetup.js\";\nimport { w as writeEffect, t as typingInterval } from \"./writeEffect.js\";\nimport { u as unwriteEffect } from \"./unwriteEffect.js\";\nconst loopOnce = async (node, props) => {\n  const { options, elements } = animationSetup(node, props);\n  for (const element of elements) {\n    const { currentNode, text } = element;\n    await writeEffect(element, options);\n    const textWithUnescapedAmpersands = text.replaceAll(\"&\", \"&amp;\");\n    const fullyWritten = currentNode.innerHTML === textWithUnescapedAmpersands;\n    if (fullyWritten) {\n      options.dispatch(\"done\");\n      await typingInterval(options.wordInterval);\n      const isLastElement = elements.indexOf(element) === elements.length - 1;\n      if (!isLastElement) {\n        await unwriteEffect(currentNode, options);\n        runOnEveryParentUntil(currentNode, options.parentElement, (element2) => {\n          currentNode === element2 ? element2.classList.remove(\"typing\") : element2.classList.remove(\"finished-typing\");\n        });\n      }\n      runOnEveryParentUntil(currentNode, options.parentElement, (element2) => {\n        const cursorHasTimeout = typeof options.keepCursorOnFinish === \"number\";\n        cursorHasTimeout && setTimeout(() => {\n          element2.classList.replace(\"typing\", \"finished-typing\");\n        }, options.keepCursorOnFinish);\n      });\n    }\n  }\n  return {\n    update() {\n    },\n    destroy() {\n    }\n  };\n};\nexport {\n  loopOnce as default\n};\n"],"names":[],"mappings":";;;;;AAGK,MAAC,QAAQ,GAAG,OAAO,IAAI,EAAE,KAAK,KAAK;AACxC,EAAE,MAAM,EAAE,OAAO,EAAE,QAAQ,EAAE,GAAG,cAAc,CAAC,IAAI,EAAE,KAAK,CAAC,CAAC;AAC5D,EAAE,KAAK,MAAM,OAAO,IAAI,QAAQ,EAAE;AAClC,IAAI,MAAM,EAAE,WAAW,EAAE,IAAI,EAAE,GAAG,OAAO,CAAC;AAC1C,IAAI,MAAM,WAAW,CAAC,OAAO,EAAE,OAAO,CAAC,CAAC;AACxC,IAAI,MAAM,2BAA2B,GAAG,IAAI,CAAC,UAAU,CAAC,GAAG,EAAE,OAAO,CAAC,CAAC;AACtE,IAAI,MAAM,YAAY,GAAG,WAAW,CAAC,SAAS,KAAK,2BAA2B,CAAC;AAC/E,IAAI,IAAI,YAAY,EAAE;AACtB,MAAM,OAAO,CAAC,QAAQ,CAAC,MAAM,CAAC,CAAC;AAC/B,MAAM,MAAM,cAAc,CAAC,OAAO,CAAC,YAAY,CAAC,CAAC;AACjD,MAAM,MAAM,aAAa,GAAG,QAAQ,CAAC,OAAO,CAAC,OAAO,CAAC,KAAK,QAAQ,CAAC,MAAM,GAAG,CAAC,CAAC;AAC9E,MAAM,IAAI,CAAC,aAAa,EAAE;AAC1B,QAAQ,MAAM,aAAa,CAAC,WAAW,EAAE,OAAO,CAAC,CAAC;AAClD,QAAQ,qBAAqB,CAAC,WAAW,EAAE,OAAO,CAAC,aAAa,EAAE,CAAC,QAAQ,KAAK;AAChF,UAAU,WAAW,KAAK,QAAQ,GAAG,QAAQ,CAAC,SAAS,CAAC,MAAM,CAAC,QAAQ,CAAC,GAAG,QAAQ,CAAC,SAAS,CAAC,MAAM,CAAC,iBAAiB,CAAC,CAAC;AACxH,SAAS,CAAC,CAAC;AACX,OAAO;AACP,MAAM,qBAAqB,CAAC,WAAW,EAAE,OAAO,CAAC,aAAa,EAAE,CAAC,QAAQ,KAAK;AAC9E,QAAQ,MAAM,gBAAgB,GAAG,OAAO,OAAO,CAAC,kBAAkB,KAAK,QAAQ,CAAC;AAChF,QAAQ,gBAAgB,IAAI,UAAU,CAAC,MAAM;AAC7C,UAAU,QAAQ,CAAC,SAAS,CAAC,OAAO,CAAC,QAAQ,EAAE,iBAAiB,CAAC,CAAC;AAClE,SAAS,EAAE,OAAO,CAAC,kBAAkB,CAAC,CAAC;AACvC,OAAO,CAAC,CAAC;AACT,KAAK;AACL,GAAG;AACH,EAAE,OAAO;AACT,IAAI,MAAM,GAAG;AACb,KAAK;AACL,IAAI,OAAO,GAAG;AACd,KAAK;AACL,GAAG,CAAC;AACJ;;;;"}